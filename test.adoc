= Concepts
:toc: left
:toclevels: 2
:imagesdir: ./_images


link:../index.html[Back to Navigation]

== Overview

Everything in IOT is based on data and communication. Devices collect data and communicate them as data points. The goal of our IIOT-Platform is the efficient handling of these data and the extraction of additional value. The following chapters describe the principles, ideas and approaches within the connyun platform.

The main motivation behind the idea of IIoT is to gain from the data your environment produces. To do so, data needs to have meaning. The first step to make your data useful is adding basic meta data.

.Data points with value and unit
image::data_definition.gif[500,500]

These data points now have more "meaning". With the correct unit, it is now possible to understand what this data means.
And if we manage to understand what they mean, we can gain basic insights from this value.
In order to create profit from this data, we have to add more information about our data. Where does it come from? What is a typical value for this single data point? We have to put it in context. Whit a frame of reference, or context, we can conclude on how to interpret data.

.Data in context of an industry robot
image::data_in_context.gif[500,500]

If we know, in which context the _150 mm/min_ stand, we can now grasp if this is within our desired parameters. We know where and how this velocity is measured an we are aware of the threshold that should be kept in that place. This method of aggregating data, applied to as many devices as possible opens the door for the advantages of the IIoT.

If each part of a production line or cell provides an information model with meaningful data and context, the combination of data from different devices is the key for generating value.
This handling of data and machines needs to be accurate enough to gain on the delivered data and on the same time generic enough to support all the devices out there.

This leads to our connyun Data Model, where we defined the core concepts necessary to meet those requirements. These concepts provide the necessary level of abstraction to manage data, to gather it, put it into context and deduce actions.

Depending on the differences in viewpoints, a _Device_ could be a single sensor up to a complex system build from several components. Therefore we are not able to find a precise definitions of these concepts.
Instead of trying a sharp definition, we will characterize these concepts by identifying the main requirements and give examples.

== On Devices

Devices are the main building blocks in our IIOT-platform. They are the representation of the physical machine.


=== Device

A device is in most cases a system, that can be connected (via onboarding) to a cloud-based IoT Platform. This system delivers information about its state and/or its environment. The complexity of the system can vary from very simple (e.g. a temperature sensor in the production hall), up to a complete production cell or line. In most cases, a device will be a product of a machine manufacturer, like for example, a robot or a CNC machine. Devices could also be unique custom devices, constructed for specific applications, for example a conveyor system.

In an ideal case, the communication protocol for exchanging data between the device, the edge component and the IoT platform, as well as the information model are standardized. This can be achieved by using OPC UA servers that implement a companion specification. Nevertheless, other communication protocols, for example MQTT, can be used as well.

NOTE: While "Device" is used to refer to both the "real" machines, as well as their digital representation, the term _digital twin_ is specific to the digital representation.


==== Details


For each device represented in our platform (the digital twin), we want to keep track of different kind of information.
A first distinction can be made among:

Master data::
* describes static properties of the Device
* E.g. manufacturer, date of purchase, current location, etc.
Operational data::
* time series (telemetry), events, alarms, log-files, etc.
* E.g. axis positions, temperature, number of processed parts, etc.
Meta data::
* describes master data and operational data
* E.g. units of measurements (kg, m/s, etc.), sensor range, datatypes, etc.
Device life-cycle data::
* data used during the life-cycle of the digital twin (E.g. on-boarding, update, decommissioning, etc.)
* E.g. device identification, device connectivity, configuration, etc.

This distinction is important because the amount of data and the change-ratio vary so strongly, that the requirements are different.

Depending on how the actual data (values) get into the system, we distinguish among:

Manually maintained data::
* Usually for master data, when must be provided via UI
* E.g. date of purchase, operators mail, machine location, etc.
Automatically acquired data::
* Definitely for operational data, but it also can apply to master data and meta data whenever this data is available from the device
* E.g. motor temperature, machine location
Business System-provided data::
* Usually master data, that is made available via integration with business systems, like ERP.

NOTE: Note how some data can be in one or the other category, like for example "machine location". This will depend on the nature of the machine (stationary => manually, mobile => machine-provided) or just on the capabilities of the system.

=== Device Type

If a device gets connected, a _device type_ is assigned and puts the data into context. Let's create a very basic device type and call it *Vehicle*. In our example, this _device type_ defines, that devices with the type *Vehicle* have a varying location, two different states (_moving_ or _standing_) and a load capacity in percent. Assuming these three values, we can match the device type *Vehicle* to a connected delivery car, a forklift in a storage hall or a autonomous transportation vehicle in a production line.

This exaggerated abstracted device types enable a fast and easy onboarding of vehicle-devices and provides a base to develop more specific device types, if needed.

Let's have another example for a Device Type called *Industry Robot*. In our imaginary production line, there are two types of robots; one for handling the parts and one for drilling holes in these parts.
Assuming, that the gripper and the drill are operated with pressurized air, the Device Type *Industry Robot* will suite both types in your production, regardless of different manufacturers or models.

.Different robots share the same basic information model
image::shared_devicetype.gif[500,500]

If there is a need for a feature, which is not provided within this shared device type, for example an electric drill is used and therefore the data for _pressure_ is irrelevant for the drilling robot, a more specific Device Type can be created, based on the standard Device Type.

TIP: When buying that electric drill, we where aware enough to choose one with an exclusive assigned device type, or support for a appropriate communication-protocol, assigned by the manufacturer. We are now able to make use of the data from both devices, the *robot* and the *drill*.

==== Details

Device types are a central abstraction that serve two main purposes:

. Provide a formal specification of the data and control structures (a.k.a. Interface) offered by devices, if used by IIoT applications, and
. Help supporting device lifecycle tasks, like onboarding and configuration, towards full plug&work support

Device types are defined primarily by machine builders (for standardized machines/products), secondarily by system integrators, and only in exceptional cases by operators.

As device types do not represent any concrete "real" machine, they only exists as digital objects, ready to be paired with a "real" machine. A device type is carrying the following information:

Structural Information::
It describes properties and measurements common to all devices belonging to the same device type:
* Which properties do all instances of the given device type have?
* Which measurements do the devices generate (time-series, events, log, etc.)

Life-cycle Information::
Contains information that helps managing the devices in the system (digital twin). For example:

* How to recognize that a given "real" device belongs to a specific device type: E.g. OPC UA nodes for manufacturer and model + (partial) values
* How to uniquely identify a concrete instance of the device type, in order to match it with the digital twin. E.g.: OPC UA nodes to consider (manufacturer + model + serial number), or DI-"urn"

Configuration Information::
Related to the configuration of the connectivity and the digital twin. For example:
* Default View(s)
* Default Stream-Connector Configuration
Compatibility with Apps::
Which applications running in the cloud platform are generally meant/tested/approved for given device type

Relation to other device types::
* Inheritance



== On Groups

There are several use cases for groups, they can be used for various reasons.

Navigation and Location::
* Use Groups to find Devices
* Group Devices for Locations

Process::
* Group devices involved in a production-process
* Group devices according to their ability to participate in a particular process

Authorization::
* Restrict user rights so only special groups are visible

Comparsion::
* Compare KPI's of complete groups against each other.

Maintenance::
* Group Devices which are maintained by a company
* Assign a "emergency contact" to a group


=== Group

Groups can be used to define “typed” collections of devices. “Typed“ means, that a group (instances) is defined not only by its members, but it describes a common semantics for the contained objects, defined by specific group-type attributes and the associated values. Groups can build-up hierarchies, and can be used for finding/browsing devices, and for aggregating KPIs. In summary a group is a collection of devices and (sub-)groups, with properties defined by the group type.

The most common usage of groups is with hierarchical groups that represent physical locations, like for example a city in a country, with multiple buildings.

.Grouping by locations
image::hiera_groups.gif[600,600]

Groups can however be also used to bring devices together that logically belong to some group. For example: the set of all KUKA Robots, or the set of all machines involved in some manufacturing process, or the set of all machines being maintained by some specific service company.

.Grouping by lines or machine types
image::groups.gif[500,500]


=== Asset

The definition of an asset (a concept taken from the business vocabulary) depends on the focus set by the plant operator. In many cases, one asset will correspond with exactly one device. However, and depending on how the device type was defined, it could be that the granularity of devices does not match the expectations of the plant operator. For example, if the operator is primarily interested in the OEE of a production cell, which consists of individual machines onboarded as individual devices, then the asset could contain all the devices in the cell. Alternatively, the overall data for the cell can be provided by a specialized OPC UA server, onboarded as an independent device. In this case, the asset could contain only this single device, or also include all the devices for the individual machines.

NOTE: Note that assets get the data only via its contained devices.



== Platform

The term _Platform_ in the IIOT world is quite difficult to outline.
We at connyun think, that a platform has to provide four major pillars to be a true platform:

. Connectivity
. Cloud
. Big Data Capability
. Applications

This set of requirements allows to make use of the full potential of IOT.

=== Connectivity

Connectivity is the ability of a computing device to connect to other computers or to the Internet.
The platform has to provide the interfaces which enable data transfer between devices and furthermore every other data source, which provides relevant information.
For example an ERP-system, providing information about the company-inventory and available raw materials.

=== Cloud

Connected Devices have to deliver their data somewhere. A cloud-based solution provides the infrastructure for storage, computing and real-time processing.
Furthermore enables cloud technology the communication between different parties involved in different processes. Maybe the builder of your robot releases an improved information-model for your robot.
Or maybe the dimensional accuracy of the manufactured parts is to be compared with the air humidity and temperature at the time of manufacture in order to detect deviations following a pattern. The cloud brings production data (dimensional accuracy of the parts) together with environment data from your production plant.

=== Big Data

https://www.gartner.com/newsroom/id/3598917[According to this estimation by Gardner], in 2020 the total count of connected devices will surpass the 20-Billion-Mark.

If each of these devices runs for only *one* minute, and delivers only *one* continuous stream of data for only that *one* minute, the total data stream would last *thirty-eight thousand years* long.

This example is of course not a valid expression. But there will be a lot of data and a IIOT platform has to be able to handle big amounts of data.


=== Applications

As the name suggests, the _platform_ itself does not primarily add value; this is what apps are for.
The platform has to provide an interface for developers to make use of the stored data.
Apps will take care of the different scopes, like predictive maintenance, data mining, analytics and automated workflows.
The platform provides access to data structure for developers and creates a space, where the work with data takes place
